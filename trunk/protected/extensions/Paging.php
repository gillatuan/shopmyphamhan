<?php/** * @author    Tuan.Bui * @copyright 2013 */class Paging{    public $total_rows;    public $rows_in_page;    public $name_page;    public $roll;    public $current_page;    public $total_pages;    public $begin;    public $end;    public $tab = '';    public $kw = '';    public $page_link = "";    public function __construct($name_page, $total_rows, $itemPerPage, $current_page, $roll=4, $tab='', $kw='')    {        $this->name_page    = $name_page;        $this->total_rows   = $total_rows;        $this->rows_in_page = $itemPerPage;        $this->roll         = $roll;        $this->current_page = $current_page;        $this->begin        = $this->rows_in_page * ($this->current_page - 1);        $this->total_pages  = ceil($this->total_rows / $this->rows_in_page);        $this->tab          = $tab;        $this->kw           = $kw;    }    public function pageLinks()    {        //Lay roll begin va end        if ($this->total_pages < $this->roll) {            $this->begin = 1;            $this->end   = $this->total_pages;        }        else {            if (($this->current_page - ceil($this->roll / 2)) < 1) {                $this->begin = 1;                $this->end   = $this->roll;            }            else {                $this->begin = $this->current_page - ceil($this->roll / 2);                if ($this->current_page >= $this->total_pages) {                    $this->end   = $this->total_pages;                    $this->begin = $this->total_pages - $this->roll + 1;                }                else {                    $this->end = $this->begin + $this->roll - 1;                    if ($this->end == $this->current_page) {                        $this->begin = $this->begin + 1;                        $this->end   = $this->end + 1;                    }                }            }        }        //Xuat so trang hien thi        for ($i = $this->begin; $i <= $this->end; $i++) {            if ($i == $this->current_page) {                $this->page_link .= '<li class="active">' . $i;            }            else {                if ($this->tab) {                    $this->page_link .= '<li>' . "<a href='" . $this->name_page . "?tab=$this->tab&page=$i' title='page " . $i . "'> " . $i . " </a>";                } elseif ($this->kw) {                    $this->page_link .= '<li>' . "<a href='" . $this->name_page . "?kw=$this->kw&page=$i' title='page " . $i . "'> " . $i . " </a>";                } else {                    $this->page_link .= '<li>' . "<a href='" . $this->name_page . "?page=$i' title='page " . $i . "'> " . $i . " </a>";                }            }        }        return $this->page_link . '</li>';    }    public function preLink($pre_view)    {        if ($this->current_page == 1) {            $preLink = $pre_view;        }        else {            if ($this->tab) {                $preLink = "<a href='" . $this->name_page . "?tab=$this->tab&page=" . ($this->current_page - 1) . "' title='page " . ($this->current_page - 1) . "'>" . $pre_view . "</a>";            } elseif ($this->kw) {                $preLink = "<a href='" . $this->name_page . "?kw=$this->kw&page=" . ($this->current_page - 1) . "' title='page " . ($this->current_page - 1) . "'>" . $pre_view . "</a>";            } else {                $preLink = "<a href='" . $this->name_page . "?page=" . ($this->current_page - 1) . "' title='page " . ($this->current_page - 1) . "'>" . $pre_view . "</a>";            }        }        return '<li>' . $preLink . '</li>';    }    public function nextLink($next_view)    {        if ($this->current_page == $this->total_pages) {            $nextLink = $next_view;        }        else {            if ($this->tab) {                $nextLink = "<a href='" . $this->name_page . "?tab=$this->tab&page=" . ($this->current_page + 1) . "' title='page " . ($this->current_page + 1) . "'>" . $next_view . "</a>";            } elseif ($this->kw) {                $nextLink = "<a href='" . $this->name_page . "?kw=$this->kw&page=" . ($this->current_page + 1) . "' title='page " . ($this->current_page + 1) . "'>" . $next_view . "</a>";            } else {                $nextLink = "<a href='" . $this->name_page . "?page=" . ($this->current_page + 1) . "' title='page " . ($this->current_page + 1) . "'>" . $next_view . "</a>";            }        }        return '<li>' . $nextLink . '</li>';    }    public function firstLink($first_view)    {        if ($this->tab) {            $firstLink = "<a href='" . $this->name_page . "?tab=$this->tab&page=1' title='page first'>" . $first_view . "</a>";        } elseif ($this->kw) {            $firstLink = "<a href='" . $this->name_page . "?kw=$this->kw&page=1' title='page first'>" . $first_view . "</a>";        } else {            $firstLink = "<a href='" . $this->name_page . "?page=1' title='page first'>" . $first_view . "</a>";        }        return "<div class='pager'><ul class='yiiPager'><li>" . $firstLink . "</li>";    }    public function lastLink($last_view)    {        if ($this->tab) {            $lastLink = "<a href='" . $this->name_page . "?tab=$this->tab&page=$this->total_pages' title='page first'>" . $last_view . "</a>";        } elseif ($this->kw) {            $lastLink = "<a href='" . $this->name_page . "?kw=$this->kw&page=$this->total_pages' title='page first'>" . $last_view . "</a>";        } else {            $lastLink = "<a href='" . $this->name_page . "?page=" . $this->total_pages . "' title='page last'>" . $last_view . "</a>";        }        return '<li>' . $lastLink . '</li></ul></div>';    }}